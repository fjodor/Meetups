<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Datenanalyse / Statistik mit R leicht gemacht!</title>
    <meta charset="utf-8" />
    <meta name="author" content="Wolf Riepl" />
    <script src="libs/header-attrs-2.12/header-attrs.js"></script>
    <link rel="stylesheet" href="libs/_css/my_css.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: hide-footer, hide-count
background-color: #EFEFEF





.pull-left[

# Statistik leicht gemacht mit

&lt;img src="libs/_Images/logo-R.png" width="267" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;br&gt;&lt;br&gt;
## Hands-On Tutorial

&lt;img src="libs/_Images/Darmstadt-Data-Science.png" width="100%" height="100%" style="display: block; margin: auto;" /&gt;
]

.left-column[&lt;br&gt;&lt;br&gt;&lt;br&gt;`` ``14. M√§rz 2022]
.right-column[
.pull-left[Wolf Riepl - R Trainer]
.pull-right[Youtube: StatistikinDD]
.pull-left[https://statistik-dresden.de]
.pull-right[Twitter: @StatistikinDD]
]

---

class: agenda, inverse

# Agenda

### .yellow[*1. Kurzer Einstieg in R und RStudio*]
### 2. Automatisierte Berichte mit R: Das Markdown-Format
### 3. Statistik mit R leicht gemacht
### 4. Erg√§nzungen

???

* Zuerst Pakete installieren, dann einleitende Folien
* Gemeinsam stricken

R-Code schreiben, ja - aber dank moderner Erweiterungspakete kann man viel Cooles mit ein oder zwei Codezeilen erreichen

---

layout: true

# Erstes Date: R und RStudio

---

## Warum R?

&gt; R ist die weltweit leistungsst√§rkste Programmiersprache f√ºr statistische Berechnungen, maschinelles Lernen und Grafiken und steht gleichzeitig f√ºr eine bl√ºhende globale Gemeinschaft von Anwendern, Entwicklern und Beitragenden.

--

** *Das sagt ausgerechnet - Microsoft!* ** Microsoft R Application Network (MRAN)

* √úber 18.000 Erweiterungspakete allein auf CRAN  
  (Comprehensive R Archive Network)
* Weitere Pakete u. a. bei github und auf bioconductor.org
* Online gibt es Antworten auf nahezu jede denkbare R-Frage, z. B. bei **stackoverflow**
* Sehr aktive Community: Twitter #RStats, RBloggers

---

## Warum R? Einige Konzerne, die R einsetzen

.pull-left[
![facebook](libs/_Images/logo-facebook.png)

![Google](libs/_Images/logo-Google.png)

&lt;img src="libs/_Images/logo-Twitter.png" width="15%" height="15%" /&gt;

&lt;img src="libs/_Images/logo-airbnb.png" width="25%" height="25%" /&gt;

]

.pull-right[
* u. a. zur Verhaltens-Analyse (Status-Updates, Profilbilder);  
Visualisierung gro√üer Datenmengen  
&lt;br&gt;
  
* Werbewirksamkeit; √∂konomische Prognosen;  
statistische Modellierung (Big Data)  
&lt;br&gt;&lt;br&gt;
  
* Datenvisualisierung, Semantische Analysen
&lt;br&gt;&lt;br&gt;&lt;br&gt;

* Data Science


]

---

.pull-left[

## Warum R? Popularit√§t

* Sehr popul√§r f√ºr eine **dom√§nen-spezifische Sprache**
* ABER:

&lt;img src="libs/_Images/hadley-rankings.png" width="85%" height="85%" /&gt;

Tiobe Index: Starke Schwankungen  
z. B. R auf Platz 8 (08/2020) vs. 19 (09/2019)

]

.pull-right[
&lt;img src="libs/_Images/IEEE-ranking-2021.png" width="74%" height="74%" /&gt;

* IEEE = *Institute of Electrical and Electronics Engineers* **2021**; 
https://spectrum.ieee.org/top-programming-languages/
* 11 Metriken von github, Google, Stack Overflow, Twitter etc.
* Nicht in Top 10: PHP, SQL, Ruby, Rust, Julia

]
---

## Ein kuzer Blick in die Geschichte

.large[
* R ist eine Implementierung der Programmiersprache S
* S wurde von John Chambers (Bell Labs) entwickelt; erste Ver√∂ffentlichung (S1) 1976
* **Ross Ihaka** und **Robert Gentleman** entwickelten R ab 1992; Verbreitung ab 1993
* Weiterentwicklung durch R Core Team (https://www.r-project.org/contributors.html) seit 1997
* R Foundation for Statistical Computing (Wirtschaftsuniversit√§t Wien)
* GNU (General Public License)
* R ist gleichzeitig eine Programmiersprache und eine Entwicklungsumgebung
]

.center[![Ross Ihaka and Robert Gentleman](libs/_Images/ihaka-gentleman.png)]

---

## Grundprinzipien: Wie tickt R?

.pull-left[
* √úberwiegend programmiert in R, C, Fortran

* Funktionales Programmieren und &lt;br&gt;Objektorientiertes Programmieren:

&gt; "Alles, was existiert, ist ein Objekt.  
Alles, was passiert, ist ein Funktionsaufruf."

&lt;br&gt;.right[
John Chambers  
Entwickler von S und Mitglied von R Core
]]

.pull-right[
.right[![R Logo](libs/_Images/logo-R.png)]  
![John Chambers](libs/_Images/john-chambers.png)
]

---

### Starkes Entwicklerteam, unter anderen:

Hadley Wickham | Jenny Bryan | Max Kuhn | Garrett Grolemund
---------------|-------------|----------|------------------
![Hadley Wickham](libs/_Images/hadley-wickham.png) | ![Jenny Bryan](libs/_Images/jenny-bryan.png) | &lt;img src="libs/_Images/max-kuhn.png" alt="Max Kuhn", width=172px&gt; | ![Garrett Grolemund](libs/_Images/garrett-grolemund.png)
√úber 130 R-Pakete | ROpenSci: reproduzierbare Forschung; R Foundation | Pakete: tidymodels;&lt;br&gt;√§lter: caret, C50 | Zahlreiche Webinare
Initiator des *tidyverse* | B√ºcher: Happy Git; R Packages | Buch: Tidy Modeling with R (mit Julia Silge) | Buch: R for Data Science
B√ºcher: R for Data Science; Advanced R; ggplot2;&lt;br&gt;R Packages | "... dann komme ich in Ihr B√ºro und z√ºnde Ihren Computer an üî•" | Buch: Feature Engineering and Selection (mit Kjell Johnson) | Buch: Hands-On Programming with R

---

### Starkes Entwicklerteam, unter anderen:

Mara Averick | Yihui Xie | Thomas Pedersen | Winston Chang
-------------|-----------|-----------------|--------------
&lt;img src="libs/_Images/mara-averick.png" alt="Mara Averick", height = 172px&gt; | &lt;img src="libs/_Images/yihui-xie.png" alt="Yihui Xie", height=172px&gt; | &lt;img src="libs/_Images/thomas-pedersen.png" alt="Thomas L. Pedersen", height=172px&gt; | &lt;img src="libs/_Images/winston-chang.png" alt="Winston Chang", height=172px&gt;
tidyverse-Entwicklerin | R-Pakete: knitr, animation, bookdown, blogdown, xaringan | gganimate, zahlreiche ggplot2-Erweiterungen | Shiny, R6; Mitarbeit an ggplot2, devtools
\&gt; 40.000 Twitter-Follower | B√ºcher: R Markdown, Blogdown, Bookdown | arbeitet u. a. an Beschleunigung von Grafik-Paketen | R Graphics Cookbook

---

## Empfohlene Entwicklungsumgebung f√ºr R

* *Es gibt Alternativen, z. B. R Tools f√ºr Visual Studio; vim*

* Team entwickelt auch **Shiny** (Tool f√ºr interaktive Webapplikationen mit R)
* Kontinuierliche Weiterentwicklung;  
*Empfehlung: RStudio regelm√§√üig updaten!*

* Leistungsf√§hige Open-Source-Version

* Bei wachsenden Anforderungen skalierbar:
  + RStudio Desktop Server (kostenlos)
  + RStudio Desktop Pro (kostenpflichtig)
  + RStudio Workbench (kostenpflichtig)

---

layout: false

# Erstes Date: R und RStudio - Projekte

&lt;img src="libs/_Images/RStudio-Projekt-anlegen.png" width="501" style="display: block; margin: auto;" /&gt;

** Projektspezifische Arbeitsumgebung mit Skripten, Daten, Befehlsgeschichte**


---
class: agenda, inverse

# Agenda

### 1. Kurzer Einstieg in R und RStudio
### .yellow[*2. Automatisierte Berichte mit R: Das Markdown-Format*]
### 3. Statistik mit R leicht gemacht
### 4. Erg√§nzungen


---
layout: true

# Automatisierte Berichte mit R

---

## Warum? Houston, wir haben ein Problem!

&lt;img src="libs/_Images/markdown-houston.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

---

## Warum? Reproduzierbarkeit von Studien, Datenanalysen

#### Sch√§tzungen

* 75% - 90% pr√§-klinischer Studienergebnisse nicht reproduzierbar
* Kosten f√ºr bio-medizinische Firmen in den USA pro Jahr: 28 Mrd. USD

Quelle: Vortrag von Garrett Grolemund, EARL-Konferenz, London

* Video: https://www.youtube.com/watch?v=HVlwNayog-k
* Folien: https://earlconf.com/_downloads/london_speakers/EARL2018_-_London_-_Garrett_Grolemund.pdf

#### Reproduzierbare Ergebnisse dank RMarkdown!

---

## Word, PDF, Powerpoint, .green[HTML]

.pull-left[

* Markdown: einfache Auszeichnungssprache (‚ÄûMarkup‚Äú-Sprache)  
Weitere Markup-Sprachen: HTML, XML  
* R-Paket **rmarkdown** seit 2014
* Word-Dokumente erfordern MS Word-Installation
* PDF-Dokumente:
  + LaTeX-Installation: **TinyTex** (Alternative: MiKTeX)
  + Oder HTML aus Browser als PDF drucken bzw. `pagedown::chrome_print()`

* .green[**Empfehlung: HTML f√ºr interaktive Elemente!**]
* Es gibt verschiedene HTML-Formate, inklusive mehreren Pr√§sentations-Varianten
  + Mein Favorit: .blue[**xaringan**]
]

.pull-right[
&lt;img src="libs/_Images/logo-markdown.png" width="60%" height="50%" style="display: block; margin: auto 0 auto auto;" /&gt;
]

---

## Vorlagen unter File - New File - R Markdown

.pull-left[

&lt;img src="libs/_Images/Markdown-Vorlage.png" width="85%" height="85%" /&gt;

]

.pull-right[

Jederzeit zwischen HTML, PDF, Word wechseln: im YAML-Header

* output: html_document
* output: word_document
* output: pdf_document

Oder:

&lt;img src="libs/_Images/knit-to.png" width="40%" height="40%" /&gt;

]

---

## YAML Header

* Enth√§lt Meta-Informationen, z. B. Titel, Autor, Datum, Ausgabeformat
* YAML Ain‚Äòt Markup Language &lt;- Yet Another Markup Language
* Gekennzeichnet mit jeweils drei	---	am Anfang des Dokuments
* Grundger√ºst kann aus RStudio-Vorlage √ºbernommen und angepasst werden

**Knit:** Dokument aus .Rmd-Vorlage erstellen

&lt;img src="libs/_Images/yaml-header.png" width="70%" height="70%" /&gt;

---

## R-Code und Text mischen

&lt;img src="libs/_Images/Text_R-Code.png" width="100%" height="100%" /&gt;&lt;img src="libs/_Images/Text_R-Code_Output.png" width="100%" height="100%" /&gt;

---

## R-Code und Text mischen

.pull-left[

Markdown-Code | Ergebnis
--------------|---------
*'r R-code'*  |	R-Code in laufenden Text einbetten,&lt;br&gt;z. B. ‚ÄûDie Daten beruhen auf 'r nrow(albums)' Alben.‚Äú
#&lt;br&gt;##| √úberschrift 1 &lt;br&gt; √úberschrift 2 ‚Ä¶ usw.
\*Text*&lt;br&gt;\_Text_          | *Kursivschrift*
\*\*Text**&lt;br&gt;\_\_Text__    | **Fettschrift**

]

.pull-right[
Markdown-Code | Ergebnis
--------------|---------
\* Punkt 1&lt;br&gt;\* Punkt 2&lt;br&gt; &lt;center&gt; + P 2.1 | Nicht nummerierte Liste
1. Punkt 1&lt;br&gt;2. Punkt 2 | Nummerierte Liste

Weitere Formatierungen siehe:
* https://rmarkdown.rstudio.com/authoring_basics.html
* Markdown Quick Reference in der RStudio-Hilfe

]
   
---

## R Codeblock



![R-Codeblock](libs/_Images/R-Codeblock.png)

* Beginnt mit ```` ```{r} ````
* endet mit ```` ``` ```` 
* Wird von R Studio automatisch grau hinterlegt
* Empfehlung: benennen; hier: *Codeblock*; jeder Name muss eindeutig sein
* echo = TRUE:	Codeblock im fertigen Dokument anzeigen; Alternative: FALSE
* eval = FALSE: Code nicht evaluieren (d. h. hier erscheint Code, aber kein Diagramm)
* Tastaturk√ºrzel: **Strg + Alt + I** f√ºgt Codeblock ein

---

## Chunk-Optionen

.large[
F√ºr weitere Chunk-Optionen neben *echo* und *eval* siehe https://yihui.org/knitr/options/

* Einstellungen f√ºr Grafiken, z. B. fig.width, fig.height

* Caching, d. h. Zwischenspeichern von Codebl√∂cken f√ºr schnellere Ausf√ºhrung

* Umgang mit Fehlern (anzeigen vs. abbrechen) und Warnungen, Messages (anzeigen vs. unterdr√ºcken)

* Animationen
]

---

## Literatur

.pull-left[
&lt;img src="libs/_Images/cover-markdown.png" width="45%" style="border:10px solid white;" /&gt;&lt;img src="libs/_Images/cover-R4DS.png" width="45%" style="border:10px solid white;" /&gt;
]

.pull-right[
Beide B√ºcher sind online kostenlos lesbar

* [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/)
* [R for Data Science](https://r4ds.had.co.nz/index.html)
	Kap. 27, 29, 30

Hilfe in RStudio

* Help ‚Äì Markdown Quick Reference
* Help ‚Äì Cheatsheets:  
R Markdown Cheat Sheet  
R Markdown Reference Guide

]

---

## Ausblick: Bookdown - B√ºcher direkt aus R

.pull-left[
* R-Paket von **Yihui Xie** (knitr, animation)

* Grundlage: Markdown
* Dynamische Bearbeitung
* Flexible Outputs, z. B. PDF auf Knopfdruck
* Einfachere Auszeichnungssprache als LaTeX
* Online-Ver√∂ffentlichung, z. B. auf GitHub, bookdown.org, beliebiger Webserver
* Online-Ver√∂ffentlichung erm√∂glicht interaktive Inhalte:  
Shiny-Apps, HTML-Widgets, Animationen

https://bookdown.org/

]

.pull-right[
&lt;img src="libs/_Images/cover-bookdown.jpg" width="55%" height="55%" /&gt;

]

---

## Ausblick: Blogdown - Websites / Blogs direkt aus R

.pull-left[
* R-Paket von **Yihui Xie** (knitr, animation)

* Erzeugt statische Webseite:
  + HTML, CSS, JavaScript, Bilder, ...
  + Kein PHP, keine Datenbank, keine serverbasierte R-Installation erforderlich

* Grundlage: Markdown
  + Dynamische Bearbeitung
  + Flexible Outputs, z. B. PDF, Buch, etc.
  
https://bookdown.org/yihui/blogdown/
]

.pull-right[
&lt;img src="libs/_Images/cover-blogdown.png" width="57%" height="57%" /&gt;

]

---

## Ausblick: Dashboards mit R und Markdown

.pull-left[
### Das flexdashboard-Paket

* Baut auf Markdown auf, HTML-Format
* Responsiv
* Unterst√ºtzt *value boxes* und *gauges* (K√§stchen und Armaturen-Displays wie im Auto)
* Flexible Layouts: Zeilen und Spalten einfach definieren
* *Storyboards*: Grafiken und zentrale Befunde √ºbersichtlich darstellen
* Interaktive Elemente: HTML-Widgets, optional Shiny-Apps

https://pkgs.rstudio.com/flexdashboard/
]

.pull-right[
&lt;img src="libs/_Images/flexdashboards.png" width="911" /&gt;
]

---

## Ausblick: Shiny

.pull-left[

* Interaktive App, die auf Nutzereingaben reagiert

* Ben√∂tigt R w√§hrend der Laufzeit:

  + Lokale R-Session *oder*
  + Serverbasierte R-Session (Webseite)

* In Markdown-Dokumente einbetten oder als alleinstehende App
  
Shiny lernen:

  + RStudio-Webseiten: https://shiny.rstudio.com/
  + Buch von Hadley Wickham: [Mastering Shiny](https://mastering-shiny.org/)
]

.pull-right[
&lt;img src="libs/_Images/cover-mastering-shiny.png" width="70%" height="70%" /&gt;
]


---

layout: false
class: agenda, inverse

# Agenda

### 1. Kurzer Einstieg in R und RStudio
### 2. Automatisierte Berichte mit R: Das Markdown-Format
### .yellow[*3. Statistik mit R leicht gemacht*]
### 4. Erg√§nzungen


---
layout: true

# Statistik mit R leicht gemacht

---

## Lang lebe die Nullhypothese ...

.pull-left[
![xkcd Nullhyp](libs/_Images/xkcd-892-Null-hyp.png)
]

.pull-right[
Quelle: xkcd 892  
https://xkcd.com/892/
]

---

## Daten: Das chartmusicdata-Paket

.pull-left[
#### https://tsort.info/ "The World's Music Charts"
  + Songs und Alben von 1900 bis 2018
  + Punktesystem gut geeignet f√ºr Eintr√§ge bis etwa 2012

#### https://chart2000.com/ "Music Charts 2000 - 2021"
  + Punktesystem besser f√ºr aktuellere Eintr√§ge

#### Einmalig installieren; in jeder R-Session bei Bedarf laden


```r
# install.packages("devtools")
library(devtools)
install_github("fjodor/chartmusicdata")
```


                        
 
]

.pull-right[

Datensatz | Quelle: tsort.info
----------|-------
charts | Alle Songs und Alben von tsort.info von 1900 bis 2018
topsongs | Top 5000 Songs
topalbums | Top 3000 Alben

&lt;br&gt;&lt;br&gt;

Datensatz | Quelle: chart2000.com
----------|-----------------------
songs2000 | Top 50 Songs jedes Monats von Januar 2000 bis Juni 2021
albums2000 | Top 50 Alben jedes Monats von Januar 2000 bis Juni 2021

]
---

## Die topalbums-Daten


```r
head(topalbums, n = 3)
```


| position|artist          |name                                 | year| final_score| raw_usa| raw_eng| raw_eur| raw_row|
|--------:|:---------------|:------------------------------------|----:|-----------:|-------:|-------:|-------:|-------:|
|        1|The Beatles     |Sgt Pepper's Lonely Hearts Club Band | 1967|      54.415|  33.740|  13.824|   9.284|   0.553|
|        2|Michael Jackson |Thriller                             | 1982|      50.782|  29.628|  18.143|  14.952|   4.743|
|        3|U2              |The Joshua Tree                      | 1987|      38.197|  21.342|  13.411|  17.733|   0.553|

--

.pull-left[
* position: Platzierung, von 1 bis 3000
* artist: K√ºnstler / Band
* name: Album-Titel
* year: Jahr der Ver√∂ffentlichung
* final_score: Gesamt-Punkte, gewichtet nach Region und Jahr
]

.pull-right[
* raw_usa: Rohpunkte USA
* raw_eng: Rohpunkte in den restlichen englischsprachigen L√§ndern
* raw_eur: Rohpunkte in den restlichen (nicht-englischsprachigen) europ√§ischen L√§ndern
* raw_row: Rohpunkte im Rest der Welt (ohne Europa, ohne englischsprachige L√§nder)
]


---

## Erscheinungsjahr vs. √úber / Unter 5 Punkten

**Forschungsfrage:** Gibt es Unterschiede im durchschnittlichen Alter (Erscheinungsjahr)  
.indent[.indent[zwischen Alben, die √ºber / unter 5 Punkten (~ Median) erreichten?]]

--

**Hypothese:** Alben, die √ºber 5 Punkte erreichten,	sind durchschnittlich √§lter als Alben, die weniger als 5 Punkte erreichten.

--

**Begr√ºndung:**	Mehr Zeit f√ºr Chartplatzierungen; ‚ÄûOldies‚Äú waren langlebiger?

--

**Methode:** t-Test f√ºr unabh√§ngige Stichproben  
.indent[.indent[*Statistik ‚Äì Mittelwerte vergleichen*]]

**Begr√ºndung der Testauswahl:**
* keine Messwiederholung
* keine paarweise Zuordnung der Gruppenelemente -&gt; unabh√§ngige Stichproben



---

## t-Test: Ergebnisse *elegant* weiterverarbeiten

### Bericht in Textform (englisch): easystats / report

.pull-left[


```r
library(report)
my_test &lt;- t.test(year ~ ueber5,
*  alternative = 'greater',
   conf.level = .95, var.equal = FALSE,
   data = topalbums)
*report(my_test)
```


```
The Welch Two Sample t-test testing the difference
of year by ueber5 (mean in group &lt; 5 P = 1991.10,
mean in group &gt; 5 P = 1989.62) suggests that the
effect is positive, statistically significant, and
very small (difference = 1.49, 95% CI [0.61, Inf],
t(2758.20) = 2.80, p = 0.003; Cohen's d = 0.11,
95% CI [0.04, Inf])
```

]

.pull-right[

&lt;img src="libs/_Images/logo-report.png" width="40%" height="40%" /&gt;
* Kennwerte, die √ºber die Standard-Ausgabe des t-Tests hinausgehen: **Effektst√§rken**
* Teil der **easystats**-Paketsammlung
]

---

## t-Test: Ergebnisse *elegant* weiterverarbeiten

.pull-left[
### Visualisierung: ggstatsplot


```r
library(ggstatsplot)
*ggbetweenstats(topalbums,
  x = ueber5, y = year,
  title = "Jahr vs. √úber / Unter 5 Punkte",
  caption = "Datenquelle: tsort.info")
```

* Boxplot
* Violin-Plot
* Einzelne Datenpunkte
* Angereichert mit statistischen Kennzahlen

]

.pull-right[
&lt;img src="2022-03-14_Meetup-Darmstadt-Presentation_files/figure-html/unnamed-chunk-17-1.png" width="95%" height="95%" /&gt;

]

---

## Korrelationsanalyse

![xkcd Korr](libs/_Images/xkcd-925-corr.png)

Quelle: http://xkcd.com/925/

---

## Korrelationsanalyse

.pull-left[

* Korrelation zwischen Rohpunkten USA und Rohpunkten Europa
* Ergebnis: Liste


```r
Korrelation &lt;- cor.test(topalbums$raw_usa,
                        topalbums$raw_eur)
str(Korrelation, list.len = 4)
```

```
List of 9
 $ statistic  : Named num -3.71
  ..- attr(*, "names")= chr "t"
 $ parameter  : Named int 2998
  ..- attr(*, "names")= chr "df"
 $ p.value    : num 0.000214
 $ estimate   : Named num -0.0675
  ..- attr(*, "names")= chr "cor"
  [list output truncated]
 - attr(*, "class")= chr "htest"
```
]

.pull-right[
### Einfach dank der R-Werkzeugkiste!

* Im R Commander zusammenklicken unter `Statistik - Deskriptive Statistik - Test auf Signifikanz der Korrelation`
* Standard-Ausgabe: `Korrelation`, bzw. `cor.test(topalbums$raw_usa, topalbums$raw_eur)` direkt ausf√ºhren
]

---

.pull-left[
## Korrelation grafisch


```r
ggscatterstats(data = topalbums,
    x = raw_usa, y = raw_eur)
```

### Simple Syntax - informative Ausgabe!

* Streudiagramm: bivariate Verteilungen
* Dichte + Histogramm: *"marginal densigram"* - Verteilungen 
* Anpassungsgerade mit Konfidenzband: Linearer Zusammenhang?
* Korrelationskoeffizient *Pearson's r*
* t-Wert, p-Wert, Konfidenzintervall f√ºr r, Fallzahl
* Bayes Factor
]

.pull-right[
&lt;img src="2022-03-14_Meetup-Darmstadt-Presentation_files/figure-html/unnamed-chunk-19-1.png" width="100%" height="100%" /&gt;

]

---

## Regressionsanalyse

.pull-left[

* Nimmt im Gegensatz zur Korrelation eine Wirkungsrichtung an
* Unterscheidung zwischen **unabh√§ngigen Variablen** *(Pr√§diktoren, Regressoren)* und **abh√§ngiger Variable** *(Zielgr√∂√üe, Regressand)*


```r
*reg &lt;- lm(raw_eur ~ raw_usa,
*         data = topalbums)
reg
```

```

Call:
lm(formula = raw_eur ~ raw_usa, data = topalbums)

Coefficients:
(Intercept)      raw_usa  
    4.51192     -0.07867  
```

]

.pull-right[
* Im R Commander zusammenklicken unter `Statistik - Modelle anpassen - Lineare Regression`
* In Base R ist die direkte Ausgabe (`reg`) minimal: sie gibt lediglich die Koeffizienten an

]

---

## Regressionsanalyse: `summary()`

.small[

```r
*summary(reg)
```

```

Call:
lm(formula = raw_eur ~ raw_usa, data = topalbums)

Residuals:
   Min     1Q Median     3Q    Max 
-4.403 -2.923 -1.079  1.761 14.900 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  4.51192    0.11626  38.809  &lt; 2e-16 ***
raw_usa     -0.07867    0.02122  -3.707 0.000214 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.793 on 2998 degrees of freedom
Multiple R-squared:  0.004562,	Adjusted R-squared:  0.00423 
F-statistic: 13.74 on 1 and 2998 DF,  p-value: 0.0002139
```
]

---

## Regressionsanalyse: Text-Interpretation mit dem report-Paket


```r
*report::report(reg)
```


```
We fitted a linear model (estimated using OLS) to predict raw_eur with raw_usa (formula:
raw_eur ~ raw_usa). The model explains a statistically significant and very weak
proportion of variance (R2 = 4.56e-03, F(1, 2998) = 13.74, p &lt; .001, adj. R2 = 4.23e-03).
The model's intercept, corresponding to raw_usa = 0, is at 4.51 (95% CI [4.28, 4.74],
t(2998) = 38.81, p &lt; .001). Within this model: - The effect of raw usa is statistically
significant and negative (beta = -0.08, 95% CI [-0.12, -0.04], t(2998) = -3.71, p &lt; .001;
Std. beta = -0.07, 95% CI [-0.10, -0.03]) Standardized parameters were obtained by fitting
the model on a standardized version of the dataset. 95% Confidence Intervals (CIs) and p-
values were computed using the Wald approximation.
```

---

## Zur Interpretation von p-Werten ...

&lt;img src="libs/_Images/xkcd-1478-p-values.png" width="25%" height="25%" style="display: block; margin: auto;" /&gt;

Quelle: https://xkcd.com/1478/

---

### Normalverteilung: Voraussetzung parametrischer Tests wie t-Test

.pull-left[
#### Statistisch


```r
shapiro.test(
  topalbums$final_score
)
```

```

	Shapiro-Wilk normality test

data:  topalbums$final_score
W = 0.6974, p-value &lt; 2.2e-16
```

#### Grafisch


```r
ggstatsplot::gghistostats(
  topalbums, final_score,
  normal.curve = TRUE)
```

]

.pull-right[
&lt;img src="2022-03-14_Meetup-Darmstadt-Presentation_files/figure-html/unnamed-chunk-23-1.png" width="94%" height="94%" /&gt;

]

---

## Data Mining-Beispiel: Titanic

.pull-left[
## Wurden Frauen und Kinder zuerst gerettet?

* Daten zu 891 Passagieren (Trainingsdaten f√ºr maschinelles Lernen)
* Variablen:
  + Abh√§ngige Variable (AV): √úberlebt ja / nein
  + Unabh√§ngige Variablen (UV): Alter, Geschlecht, Passagierklasse (1-3)
* Wie h√§ngen Alter, Geschlecht und Passagierklasse mit den √úberlebenschancen zusammen?
* Ziel: Ein Ergebnis, das auch Nicht-Statistikern leicht erkl√§rt werden kann
]

.pull-right[
&lt;img src="libs/_Images/titanic.jpg" width="853" /&gt;

Der Untergang der Titanic  
Gravur von Willy St√∂wer  
Quelle: Wikimedia Commons
]

---

.pull-left[
&lt;img src="libs/_Images/Zen-Entscheidungsbaum.png" width="70%" height="70%" /&gt;

]
.pull-right[
### Entscheidungsbaum

* Leicht interpretierbar
* Nicht nur f√ºr Yogis geeignet

Quelle: https://elephantjournal.com
]

---



![](2022-03-14_Meetup-Darmstadt-Presentation_files/figure-html/rpart-1.png)&lt;!-- --&gt;

---

.pull-left[
### Interpretation

* Ausgangspunkt: Knoten 1 oben; enth√§lt gesamte Stichprobe
* Aufteilung in Unterknoten, sodass m√∂glichst ‚Äûreine‚Äú Knoten entstehen, d. h. m√∂glichst eindeutig nach Ertrunkenen und Geretteten unterschieden
* Algorithmus: `rpart`

#### Ergebnisse

* **Geschlecht** ist das wichtigste Kriterium
  + Klare Mehrheit der Frauen √ºberlebte
  + Klare Mehrheit der M√§nner starb
  + ‚ÄûKinder zuerst‚Äú bei M√§nnern ok: die meisten Jungs bis 6 Jahre √ºberlebten
* Frauen: **Passagierklasse** wichtiger als Geschlecht
]

.pull-right[
### Simpler R-Code!


```r
library(rpart)
*tree &lt;- rpart(Survived ~ .,
              data = titanic,
              method = "class")
```

* Modell: rpart; Formel wie bei Regression
* Auch f√ºr metrische abh√§ngige Variablen m√∂glich: `method = "anova"`


```r
library(rattle)
*fancyRpartPlot(tree)
```

* Visualisierung: `fancyRpartPlot()`
* Mehr Einstellm√∂glichkeiten: Paket **rpart.plot**, Funktion `prp()`

]



---
class: agenda, inverse

# Agenda

### 1. Kurzer Einstieg in R und RStudio
### 2. Automatisierte Berichte mit R: Das Markdown-Format
### 3. Statistik mit R leicht gemacht
### .yellow[*4. Erg√§nzungen*]

---

layout: true
# Erg√§nzungen

---

## Einf√ºhrung in den R Commander

.left-column[
.black[* GUI = *graphical user interface* f√ºr R
* Zahlreiche Befehle zur Datenaufbereitung, Statistik, Diagrammerstellung, Modellierung

Weitere GUIs:
* Rattle
* RKWard
* Deducer
]]

.right-column[
![Rcmdr Hauptmen√º](libs/_Images/Rcmdr-main.png)
]

---

## Statistik: Effektst√§rken und Stichpobenplanung

#### Welche Stichprobengr√∂√üe wird ben√∂tigt,&lt;br&gt;damit eine Mittelwertsdifferenz mit einer bestimmten Effektst√§rke signifikant wird?

Es geht um vier Gr√∂√üen ‚Äì sind drei bekannt, kann die vierte bestimmt werden.

* **Stichprobengr√∂√üe** (n)

* **Effektst√§rke**

* **Signifikanzniveau** = P (*Typ I-Fehler*) = Wahrscheinlichkeit, einen Effekt nachzuweisen,den es ‚Äûin Wirklichkeit‚Äú nicht gibt.  
√úblich sind 5% (auch 1%, 0,1%, 10%, ‚Ä¶)

* **Testst√§rke** (power) = 1 ‚Äì P (*Typ II-Fehler*) = Wahrscheinlichkeit, einen Effekt nachzuweisen, den es ‚Äûin Wirklichkeit‚Äú gibt.  
√úblich ist 80%


---

## Statistik: Effektst√§rken und Stichpobenplanung

.pull-left[
R-Pakete:
* **compute.es** zur Berechnung von Effektst√§rken
* **pwr** zur Stichprobenplanung


```r
library(compute.es)
library(pwr)

topalbums$nach1990 &lt;- topalbums$year &gt; 1990
ttest &lt;- t.test(topalbums$final_score ~
                  topalbums$nach1990)
Effekt &lt;- tes(ttest$statistic, 1419, 1581,
              verbose = FALSE)
pwr.t.test(n = NULL, 
           d = Effekt$d, 
           sig.level = 0.05, 
           power = 0.8, 
           type = "two.sample",
           alternative = "two.sided")
```
]

.pull-right[
### Welche Fallzahl n, &lt;br&gt;damit t-Test sig. wird?


```

     Two-sample t test power calculation 

              n = 1298.293
              d = 0.11
      sig.level = 0.05
          power = 0.8
    alternative = two.sided

NOTE: n is number in *each* group
```

]

---

.pull-left[
### Animationen mit gganimate
* Datenquelle: *gapminder*-Paket
* **Hans Rosling**: Seine Videos lohnen sich!

#### R-Paket: gganimate
* urspr√ºnglich von **David Robinson**
* stark √ºberarbeitet von **Thomas Lin Pedersen**
&lt;br&gt;
* Wohlstand (GDP, Pro-Kopf-Einkommen) und Lebenserwartung im Zeitverlauf
* 1952 ‚Äì 2007; Daten in 5er-Schritten; &lt;br&gt;gganimate ‚Äûgl√§ttet‚Äú durch Interpolation
* Grafik enth√§lt Informationen √ºber einzelne L√§nder (Farben), Bev√∂lkerung (Gr√∂√üe der Blasen) und Kontinente (Unterdiagramme = "Facetten" bzw. facets)

]

.pull-right[
![](2022-03-14_Meetup-Darmstadt-Presentation_files/figure-html/unnamed-chunk-29-1.gif)&lt;!-- --&gt;

]

---


## Datentypen in R

Datentyp | Details
---------|---------
Atomare Vektoren | logisch: TRUE, FALSE &lt;br&gt; numerisch: integer, double &lt;br&gt; character (Text)
Vektoren mit speziellen Attributen | Faktoren: Text mit festgelegten Kategorien (*factors*) &lt;br&gt; Datum (*date*), Datum-und-Zeit (*date-times*), Zeitintervalle (*durations*)
Mehrdimensionale Vektoren | Matrizen: zwei Dimensionen - Zeilen und Spalten &lt;br&gt; Arrays: Erweiterung von Matrizen, n Dimensionen
Listen | flexible Datenspeicher &lt;br&gt; k√∂nnen unterschiedliche Datentypen enthalten
Datens√§tze &lt;br&gt; *data frames* | f√ºr "rechteckige" Daten, d. h. Vektoren gleicher L√§nge


---

## ggplot2: Leicht gemacht mit esquisse!

.pull-left[
&lt;img src="libs/_Images/esquisse.png" width="1649" /&gt;
]

.pull-right[
* Grafische Nutzeroberfl√§che:&lt;br&gt;ggplot2-Diagramme interaktiv erstellen

* Variablen mit der Maus in Felder ziehen, um sie √Ñsthetiken zuzuordnen

* R-Code abrufen oder Diagramm direkt verwenden

* Start: per Code oder als RStudio-Addin  
`esquisse::esquisser()`



]


---
layout: false
class: hide-footer, hide-count

# .green[Viel Erfolg bei Ihren Datenanalysen!]

.pull-left[
&lt;img src="libs/_Images/Darmstadt-Data-Science.png" width="100%" height="100%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="libs/_Images/coffee.jpg" width="100%" height="100%" style="display: block; margin: auto;" /&gt;
]

.pull-left[
.blue[**
Wolf Riepl  
Profile auf LinkedIn und Xing  
https://statistik-dresden.de/  
**]]

.pull-right[
.blue[**
.right[Youtube: StatistikinDD]
.right[Twitter: @StatistikInDD]
.right[https://www.facebook.com/statistikdresden]
**]]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"slideNumberFormat": "%current%",
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
